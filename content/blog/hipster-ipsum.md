---
title: "Зачем ALPN для \"Вашего сайта\""
date: 2017-11-13T11:58:39-05:00
tags: ['ipsum','words']
feature: alpn
---

ALPN это Protocol negotiation 
До прихода HTTP2 установка зашифрованного соединения (просто HTTPS) представляла собой действия показанные на первом рисунке.
А с учетом того что для каждого ресурса (картинки, видео, скрипта и т. д.) устанавливалось новое соединение, то показанные на рисунке действия выполнялись многократно.
Когда добавляется HTTP2, то соединение устанавливается только одно. Но  и даже в этом случае есть возможность выиграть 1 обращение к серверу.
Как происходит работа  HTTP2 без ALPN (до ALPN в HTTP2 использовался NPN):
браузер говорит серверу: «давай общаться»
сервер ему отвечает: «давай, я умею на английском, французском и испанском»
браузер отвечает: «круто, я тоже знаю французский, давай на нем поговорим»
сервер ему отвечает: «Bonjour mon soleil»
Это показано на втором графике.
А с ALPN «диалог» строиться следующим образом:
браузер говорит серверу: «давай общаться, я знаю немецкий, украинский и французский»
сервер ему отвечает: «давай, но я знаю только французский из того что ты знаешь»
и сразу сервер начинает диалог: «J'aime mon soleil»
Это показано на третьем графике.