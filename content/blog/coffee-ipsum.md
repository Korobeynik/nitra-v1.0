---
title: "Важно чтобы был HSTS на \"Вашем сайте\""
date: 2017-11-01T12:04:16-05:00
tags: ['coffee', 'ipsum','images']
feature: hsts
---

# HTTP Strict Transport Security (HSTS) 

Без данного механизма на HTTPS возможна MITM атака. 
Как работает пример данной атаки, например у нас есть сайт который имеет корректный https и редирект всех запросов с http на https. Таким образом когда пользователь вбивает в браузере 
```
example.com
```
Он всегда видит зеленый замочек и “спит спокойно”.
На самом деле, сначала происходит обращение к 
```
http://example.com
```
и потом сервер дает браузеру команду на открытие 
```
https://example.com
```
Вот в этот момент и возможна эта атака:
Сидя в Макдональдсе с Wifi первый не шифрованный запрос перехватывается злоумышленником, сидящим за соседним столиком с картошкой фри, и редиректиться на версию сайта злоумышленника (копию оригинала, чтобы собрать логин и пароль или просто содержащую вредоносный код, а после заражения можно и на оригинал отправить - чтобы пользователь ничего не заметил).

Когда настроен HSTS, то:
- если пользователь вбивает example.com, то сразу браузер открывает https://example.com
- если пользователь вбивает **http**://example.com, то все равно браузер сразу открывает **https**://example.com

В результате это работает быстрее - за счет за счет отсутствия редиректа и безопаснее - за счет снижения возможности атаки man-in-the-middle.

![Sample image](/img/hsts.jpg)